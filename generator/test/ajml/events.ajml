<?xml version="1.0" encoding="UTF-8"?>
<ajml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <application name="test" id="app">

    <events>

	<event target="submit" type="click">
	       <action>
		<call  element="chat_db" func="insert">
		      <param name="message">
			<value element="message" property="value"/>
			</param>
			<param name="user_name"> 
			       	<value element="user_name.element" property="value"/>
			</param>
			<param name="room_id">
				<string>1</string>
			</param>
			<param name="posted">
				<datetime value="0"/>
			</param>
	         </call>
		</action>
      	</event>

<!--
     	<event target="enterButton" type="onClick">
		<action>
			<call element="rooms_db" func="insert">
				<param name="user_name">
					<value element="user_name_en" property="content"/>
				</param>
				<param name="enter_time"> 
				        <datetime value="0"/>
				</param>
			</call>
		</action>
	</event> 
		
	<event target="chatDB" type="insert">
		<action>
			<call element="messageTable" func="insert">
				<param name="user_name">
					<targetItem property="userName"/>
				</param>
				<param name="message">
					<targetItem property="message"/>
				</param>
				<param name="posted">
					<targetItem property="message"/>
				</param>
			</call>
		</action>
	</event>
-->
    </events>

    <interfaces>
      <frame>
	<panel id="chat_room" width="100%" height="100%">
	  <label id="user_name_label" content="名前" top="10px" left="20px"/>
	  <textbox id="user_name" content="user_name" top="10px" left="100px"/>
	  <label id="message_label" content="メッセージ" top="30px" left="20px"/>
	  <textbox id="message" content="message" top="30px" left="100px"/>
	  <button id="submit"  content="submit"  top="50px" left="100px">
	  </button>
	  <table id="message_list" top="100px" left="100px" width="400px" height="500px">
	    <data id="message_store" tablename="chat">
	      <condition>
		<eq property="room_id">
		  <string>1</string>
		</eq>    
	      </condition> 
	    </data>
	  </table>
	</panel>
      </frame>
    </interfaces>
    <databases>
      <database id="rooms_db">
	<property name="name" type="string"/>
	<property name="user" type="string"/>
      </database>
      <database id="messages_db">
	<property name="user" type="string"/>
	<property name="message" type="string"/>
	<property name="posted" type="datetime"/>
	<property name="roomId" type="int"/>
      </database>
    </databases>

  </application>
</ajml>
